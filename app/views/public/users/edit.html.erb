<div class='container'>
  <div class='row'>
    <div class="col-sm-12 col-md-8 col-lg-5 px-5 px-sm-0 mx-auto">
    <h2>User info</h2>
    <%= form_with model: @user, url: users_infomation_path do |f| %>
      <%= render 'layouts/errors', obj: @user %>

      <div class="form-group">
        <%= f.label :profile_image %></br>
        <%= image_tag @user.get_profile_image(100,100), id: "img_prev" %></br>
        <%= f.file_field :profile_image, placeholder: "プロフィール画像", accept: "image/*" %>
        <script type="text/javascript">
          $(function() {
            function readURL(input) {
              if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                  $('#img_prev').attr('src', e.target.result);
                }
                reader.readAsDataURL(input.files[0]);
              }
            }
            $("#user_profile_image").change(function() {
              readURL(this);
            });
          });
        </script>
      </div>

      <div class="form-group">
        <%= f.label :name %>
        <%= f.text_field :name, class: "form-control name" %>
      </div>

      <div class="form-group">
        <%= f.label :email %>
        <%= f.text_field :email, class: "form-control email" %>
      </div>

      <div class="form-group">
        <%= f.submit class: 'btn btn-secondary' %>
      </div>
    <% end %>
  </div>
</div>